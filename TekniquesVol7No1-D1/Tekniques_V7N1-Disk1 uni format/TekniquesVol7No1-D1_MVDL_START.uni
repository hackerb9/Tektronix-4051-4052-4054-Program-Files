1 GO TO 100100 REM MULTIVOLUME DIRECTORY LISTER110 REM WITH SORT AND FIRST REMARK-STATEMENT CAPABILITIES120 REM AUTHOR: FRITS HANDGRAAF130 REM         TEKTRONIX EUROPE, 2-APR-82140 REM VARIABLE DEFINITIONS:150 REM A$=VOL.INFO,B$=DIR.INFO,C$=DEL,D$ AS B$,E$=REM.INFO,F$=NAME160 REM I$&J$&Z$=SCRATCH,M$=MONTHS,O$=OVL$,V$ AS A$,X$&Y$ NAMED170 REM C1=FILENAME CHECK,D5-D8=FUNCTION#,D9=OUTPUT DEVICE,F1=EOF FLAG180 REM F5-F9=FLAGS,I&I1&J&K0&K1&T1&T2&T3&T4=COUNTERS,L1&L2=RECORD#190 REM O=OVL#,O1=SORTED INDEX ARRAY,P0&P1&P2=POS,R0&R1=RECORD COUNTERS200 REM S1&S2&S3=RECORDINFO LOC.'s,T9=LINES/PAGE,U=UNIT#,V1&V2=SORTVALUE210 REM INITIALISATION220 INIT 230 DIM A$(169),B$(189+59+72),D$(189+59+72),F$(21)240 DIM U(2)250 F$="VOLUME DIRECTORY FILE"260 O$="@MVDL/OVL"270 W$=""280 B$=""290 D$=""300 X$="@MVDL/INFO/"310 Y$="@MVDL/DIR/"320 C$=CHR(13)330 U=0340 O=0350 REM DIM D(R0) IN OVL3360 REM MENU370 PRINT "


	4907 MULTIPLE VOLUME DIRECTORY LISTER"380 PRINT "


		M E N U_ _ _ _:
"390 PRINT "	1. LIST CREATED ";F$;"S"400 PRINT "	2. CREATE       ";F$410 PRINT "	3. SORT         ";F$420 PRINT "	4. OUTPUT       ";F$430 PRINT "	5. END"440 PRINT "	
FUNCTION NUMBER REQUIRED: ";450 INPUT D5460 IF D5-INT(D5)<>0 OR (D5<1 OR D5>5) THEN 440470 IF D5=5 THEN 740480 IF D5<>2 THEN 570490 PRINT "



	BE SURE MVDL SYSTEM-DISC IS PLACED IN UNIT ";U(1)500 PRINT "	       PLACE SOURCE-DISC IN DRIVE"510 PRINT "	          AND SPECIFY UNIT NUMBER (1 OR 2):";520 INPUT U(2)530 IF U(2)-INT(U(2))<>0 OR (U(2)<1 OR U(2)>2) THEN 510540 PRINT "
	BE SURE TAPE IS IN INTERNAL TAPE-UNIT"550 PRINT "	PRESS [RETURN] TO CONTINUE:";560 INPUT Z$570 CALL "MOUNT",U(1),A$580 CALL "MOUNT",U(2),A$590 CALL "FILE",U(1),"@MVDL/RECORDINFO",Z$600 IF LEN(Z$)<>0 THEN 630610 PRINT "	
RECORDINFO FILE MISSING"620 END 630 REM OVERLAY MANAGER640 GOSUB 1000650 IF D5=O THEN 720660 Z$=STR(D5)670 Z$=REP("",1,1)680 W$=O$&Z$690 DELETE 1001,65535700 APPEND W$;1000710 D5=D5+0*MEMORY720 GOSUB 1030730 GO TO 360740 END 750 REM FILE NAME CHECK760 C1=1770 FOR I=1 TO LEN(Z$)780 IF LEN(Z$)>10 THEN 850790 I$=SEG(Z$,I,1)800 J=POS("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",I$,1)810 J=POS("abcdefghijklmnopqrstuvwxyz",I$,1)+J820 IF I=1 AND J<11 OR J=0 THEN 850830 NEXT I840 RETURN 850 C1=0860 I=LEN(Z$)870 GO TO 8301000 REM OVL1010 RETURN 