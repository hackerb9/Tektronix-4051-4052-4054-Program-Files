4000 REM **** FILE 9 - PS5010 Error Code Generation **** 3/9/824005 F$="PS5010 Error Code Test"4010 FOR L1=1 TO L4015 PRINT "<<";F$;">>  Loop ";L1;" of ";L;"     Unit ";P(N4)4100 REM4105 REM                                               *** VERIFY ID ***4110 REM4115 A$="ID TEK/PS5010,V"4120 GOSUB 27004125 ON SRQ THEN 60004200 REM4205 REM                                   *** Initialize instrument ***4210 REM4215 A$="INIT;"4220 GOSUB 5004300 REM4305 REM                 *** Codes 101, 102, 103, 107, 204, 205 ***4310 REM4315 Q=14320 RESTORE 62154325 READ K4330 FOR J=1 TO K4335 READ A$,S1,S24340 GOSUB 58004345 NEXT J4400 REM4405 REM                                                *** Code 203 ***4410 REM4415 RESTORE 62354420 READ A$,H$,S1,S24425 A$=A$&H$4430 GOSUB 58004500 REM4505 REM                                          *** Codes 108, 109 ***4510 REM4515 A$="INIT;LLSET?"4520 GOSUB 5004525 DELETE K14530 DIM K1(26)4535 WBYTE @64+P(N4):4540 RBYTE K14545 WBYTE @63,95:4550 K1(25)=K1(25)+24555 S1=974560 S2=1084565 WBYTE @32+P(N4):K14570 FOR I=1 TO 504575 REM  Give time to field SRQ4580 NEXT I4585 IF S9=S1 AND E=S2 THEN 45954590 GOSUB 59004595 A$="INIT;LLSET?;"4600 GOSUB 5004605 WBYTE @64+P(N4):4610 RBYTE K14615 WBYTE @63,95:4620 K1(8)=K1(8)+24625 S1=974630 S2=1094635 WBYTE @32+P(N4):K14640 FOR I=1 TO 504645 REM  Give time to field SRQ4650 NEXT I4655 IF S9=S1 AND E=S2 THEN 47004660 GOSUB 59004700 REM4705 REM                                           *** Codes 202,206 ***4710 REM4715 Q=14720 S1=984725 S2=2064730 A$="DT OFF;"4735 GOSUB 5004740 WBYTE @32+P(N4),8:4745 REM  Send G.E.T4750 FOR I=1 TO 504755 REM  Give time to field SRQ4760 NEXT I4765 IF E=S2 AND (S9=S1 OR S9-16=S1) THEN 47754770 GOSUB 59004775 S1=984780 S2=2024785 A$="DT SET;"4790 GOSUB 5004795 A$="VPOS 15;"4800 PRINT "Please attempt to change settings on front-panel."4805 PRINT 4810 Q=100004815 GOSUB 58004820 A$="DT OFF;"4825 GOSUB 5004830 A$="DT?;"4835 GOSUB 5004840 GOSUB 6004900 REM4905 REM                                                *** Code 403 ***4910 REM4915 Q=14920 A$="INIT;"4925 GOSUB 5004930 A$="USER ON;"4935 S1=674940 S2=4034945 PRINT "Press Front-Panel ID Button.";4950 PRINT 4955 GOSUB 58005000 REM5005 REM                                      *** Codes 721 thru 729 ***5010 REM5015 A$="INIT;"5020 GOSUB 5005025 PRINT 5030 PRINT "This portion of the test will verify the Supply Regulation"5035 PRINT "Interrupts and requires you to have a 300 Ohm 1W resistor,"5040 PRINT "a 10 Ohm 10 Watt resistor, and a large capacitor (around "5045 PRINT "1400 MFD, 200 VDC) handy."5050 PRINT 5055 PRINT "Please hit RETURN when ready.";5060 INPUT Q$5065 A$="NRI ON;VNEG 10;INEG .05;OUT ON;"5070 S1=1985075 S2=7225080 GOSUB 5005085 PRINT 5090 PRINT "Connect the 300 Ohm resistor across the COMMON (white) and"5095 PRINT "Negative (black) terminals of the Floating Supply."5100 PRINT 5105 PRINT "Hit RETURN when ready.";5110 INPUT Q$5115 A$="VNEG 20;"5120 GOSUB 58005125 S1=1975130 S2=7215135 A$="VNEG 10;"5140 GOSUB 58005145 A$="NRI OFF;VNEG 0;PRI ON;VPOS 10;IPOS .05;"5150 GOSUB 5005155 PRINT 5160 PRINT "Move the ""hot"" end of the resistor from the Negative"5165 PRINT "(black) terminal to the Positive (red) terminal of the"5170 PRINT "Floating Supply."5175 PRINT 5180 PRINT "Hit RETURN when ready.";5185 INPUT Q$5190 A$="VPOS 20;"5195 S1=2185200 S2=7255205 GOSUB 58005210 A$="VPOS 10;"5215 S1=2175220 S2=7245225 GOSUB 58005230 A$="PRI OFF;VPOS 0;LRI ON;VLOG 5.0;ILOG 0.5;"5235 S1=2225240 S2=7285245 GOSUB 5005250 PRINT 5255 PRINT "Dis-connect the 300 ohm resistor from the Floating Supply"5260 PRINT "and connect the 10 Ohm resistor across the terminals"5265 PRINT "of the Logic Supply."5270 PRINT "Hit RETURN when ready.";5275 INPUT Q$5280 A$="ILOG 0.4;"5285 GOSUB 58005290 S1=2215295 S2=7275300 A$="ILOG 0.5;"5305 GOSUB 58005310 A$="LRI OFF;VLOG 5.5;ILOG .1;"5315 GOSUB 5005320 PRINT 5325 PRINT "Dis-connect the resistor from the Logic Supply and set"5330 PRINT "it aside.  Instal the large capacitor across the Logic"5335 PRINT "Supply."5340 PRINT 5345 PRINT "                        CAUTION"5350 PRINT "                        -------"5355 PRINT "                   MAKE SURE THAT YOU"5360 PRINT "                 OBSERVE PROPER POLARITY"5365 PRINT "                      OF CAPACITOR."5370 PRINT "                   DAMAGE MAY OCCUR IF"5375 PRINT "                  CONNECTED IMPROPERLY."5380 PRINT 5385 PRINT "Hit RETURN when ready.";5390 INPUT Q$5395 A$="LRI ON;"5400 S1=2235405 S2=7295410 GOSUB 5005415 FOR I=1 TO 505420 REM Give time to field any pending SRQ's5425 NEXT I5430 A$="VLOG 4.5;"5435 GOSUB 58005440 PRINT 5445 PRINT "Remove capacitor from Logic Supply and connect it to the"5450 PRINT "Positive Supply, heeding the caution above."5455 PRINT "Hit RETURN when ready.";5460 INPUT Q$5465 A$="VPOS 15;IPOS .4;PRI ON;LRI OFF;"5470 S1=2195475 S2=7265480 GOSUB 5005485 FOR I=1 TO 505490 REM  Give time to field any pending SRQ's5495 NEXT I5500 A$="VPOS 1;"5505 GOSUB 58005510 PRINT 5515 PRINT "Dis-connect capacitor from Positive Supply and connect it"5520 PRINT "across the Negative Supply.  Heed above caution."5525 PRINT "Hit RETURN when ready.";5530 INPUT Q$5535 A$="PRI OFF;NRI ON;VNEG 15;INEG .4;"5540 S1=1995545 S2=7235550 GOSUB 5005555 FOR I=1 TO 505560 REM  Give time to field any pending SRQ's5565 NEXT I5570 A$="VNEG 1;"5575 GOSUB 58005580 PRINT 5585 PRINT "Dis-connect capacitor from Negative Supply."5590 PRINT "Hit RETURN when ready.";5595 INPUT Q$5600 A$="INIT;"5605 GOSUB 5005700 REM5705 REM                                             *** END OF TEST ***5710 REM5715 NEXT L15720 ON SRQ THEN 29005725 RETURN 5800 REM5805 REM                                           *** PUT/WAIT/TEST ***5810 REM5815 E=05820 GOSUB 5005825 IF E=0 THEN 58255830 IF E=S2 AND (S9=S1 OR ABS(S9-S1)=16) THEN 58405835 GOSUB 59005840 RETURN 5900 REM5905 REM                                                  *** SET E$ ***5910 REM5915 E$="Incorrect Error Code or Status returned after "5920 E$=E$&A$5925 B$="Status"5930 S$=STR(S9)5935 B$=B$&S$5940 B$=B$&", Error Code"5945 S$=STR(E)5950 B$=B$&S$5955 I$="Status"5960 S$=STR(S1)5965 I$=I$&S$5970 I$=I$&", Error Code"5975 S$=STR(S2)5980 I$=I$&S$5985 GOSUB 25005990 RETURN 6000 REM6005 REM                                       *** Local SRQ Handler ***6010 REM6015 S$=" "6020 FOR I1=1 TO N16025 IF T(I1)=0 THEN 60456030 POLL D,S9;P(I1)6035 IF D<>0 AND P(I1)<>P(N4) THEN 29556040 IF D<>0 AND P(I1)=P(N4) THEN 60606045 NEXT I16050 GO TO 61056060 FOR I=1 TO Q6065 NEXT I6070 PRINT @P(N4):"ERR?;"6075 INPUT @P(N4):B$6080 IF Q<>1 THEN 60956085 PRINT @P(N4):"RQS OFF;"6095 B$=SEG(B$,5,LEN(B$))6100 E=VAL(B$)6105 IF Q<>1 THEN 61206110 PRINT @P(N4):"RQS ON;"6120 RETURN 6200 REM6205 REM                                  ***Erroneous command data ***6210 REM6215 DATA 66220 DATA "VPOSS 10;",97,101,"VPOS,10;",97,102,"VPOS ON;",97,1036225 DATA "VPOS 10 VNEG 5;",97,1076230 DATA "VPOS 20;IPOS .75;",98,204,"VPOS 40;",98,2056235 DATA "SET?;SET?;"6240 DATA "VPOS 1.0000000000000000000000000000000000000000000000000000;"6245 DATA 98,2036300 END 