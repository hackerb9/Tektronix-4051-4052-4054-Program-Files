900 REM ************************************910 REM *** DASHED LINES                 ***920 REM *** 51/00-9508/1                 ***930 REM *** AUTHOR:  BOB ROSS, TEKTRONIX ***940 REM ************************************1000 REM SUBROUTINE 1 - DASHED LINE FOR STEPPED X AND ARRAY Y1010 REM1020 REM     X1 ... Starting X1030 REM     X2 ... Ending X1040 REM     X3 ... X step1050 REM     Y0 ... Y array1060 REM     1070 REM     N1 ... Dash length1080 REM     N2 ... Dash/(dash+space)1090 REM     N3 ... Starting-ending dash-space flag1100 REM1110 REM     N9 ... Display address1120 REM     V0 ... Y to X viewport ratio1130 REM     W0 ... Y to X window ratio1140 REM1150 REM ... Initialization and length calculations ...1160 MOVE @N9:X1,Y0(1)1170 N7=01180 N8=11190 X5=X11200 Y5=Y0(1)1210 N8=ABS(N1)/N21220 IF N3=0 THEN 12901230 FOR X7=X1+X3 TO X2 STEP X31240 N8=N8+11250 N7=N7+SQR(((Y0(N8)-Y0(N8-1))*V0/W0)^2+X3^2)1260 NEXT X71270 N8=INT(N7/ABS(N1)*N2*((N1>0)+(N1<0)*W0)) MAX 11280 N8=N7/(N8+N2*(N3=1)+(1-N2)*(N3=-1))1290 N4=N2*(N3<0)1300 N7=11310 FOR X7=X1+X3 TO X2 STEP X31320 N7=N7+11330 REM ... X and Y components ...1340 X6=01350 Y6=SQR(((Y0(N7)-Y0(N7-1))*V0/W0)^2+X3^2)1360 IF Y6=0 THEN 13901370 X6=X3/Y61380 Y6=(Y0(N7)-Y0(N7-1))/Y61390 N5=SQR(((Y0(N7)-Y5)*V0/W0)^2+(X7-X5)^2)1400 N6=(N2*(N4<N2)+(N4=>N2)-N4)*N81410 X5=X5+X6*(N5 MIN N6)1420 Y5=Y5+Y6*(N5 MIN N6)1430 IF N4=>N2 THEN 14801440 REM ... Dash ...1450 DRAW @N9:X5,Y51460 GO TO 14901470 REM ... Space ...1480 MOVE @N9:X5,Y51490 N4=N2*(N6<=N5)*(N4<N2)+(N4+N5/N8)*(N6>N5)1500 IF N6<=N5 THEN 13901510 N4=N4*(N4<1)1520 NEXT X71530 RETURN 2000 REM SUBROUTINE 2 - DASHED LINE FOR X AND Y ARRAYS2010 REM2020 REM     X0 ... X array2030 REM     Y0 ... Y array2040 REM     N0 ... No. of elements plotted in X0 and Y02050 REM     2060 REM     N1 ... Dash length2070 REM     N2 ... Dash/(dash+space)2080 REM     N3 ... Starting-ending dash-space flag2090 REM2100 REM     N9 ... Display address2110 REM     V0 ... Y to X viewport ratio2120 REM     W0 ... Y to X window ratio2130 REM2140 REM ... Initialization and length calculations ...2150 MOVE @N9:X0(1),Y0(1)2160 N7=02170 X5=X0(1)2180 Y5=Y0(1)2190 N8=ABS(N1)/N22200 IF N3=0 THEN 22602210 FOR N8=2 TO N02220 N7=N7+SQR(((Y0(N8)-Y0(N8-1))*V0/W0)^2+(X0(N8)-X0(N8-1))^2)2230 NEXT N82240 N8=INT(N7/ABS(N1)*N2*((N1>0)+(N1<0)*W0)) MAX 12250 N8=N7/(N8+N2*(N3=1)+(1-N2)*(N3=-1))2260 N4=N2*(N3<0)2270 FOR N7=2 TO N02280 REM ... X and Y components ...2290 X6=02300 Y6=SQR(((Y0(N7)-Y0(N7-1))*V0/W0)^2+(X0(N7)-X0(N7-1))^2)2310 IF Y6=0 THEN 23402320 X6=(X0(N7)-X0(N7-1))/Y62330 Y6=(Y0(N7)-Y0(N7-1))/Y62340 N5=SQR(((Y0(N7)-Y5)*V0/W0)^2+(X0(N7)-X5)^2)2350 N6=(N2*(N4<N2)+(N4=>N2)-N4)*N82360 X5=X5+X6*(N5 MIN N6)2370 Y5=Y5+Y6*(N5 MIN N6)2380 IF N4=>N2 THEN 24302390 REM ... Dash ...2400 DRAW @N9:X5,Y52410 GO TO 24402420 REM ... Space ...2430 MOVE @N9:X5,Y52440 N4=N2*(N6<=N5)*(N4<N2)+(N4+N5/N8)*(N6>N5)2450 IF N6<=N5 THEN 23402460 N4=N4*(N4<1)2470 NEXT N72480 RETURN 3000 REM SUBROUTINE 3 - DASHED LINE FOR X AND Y ENTRIES3010 REM3020 REM     X4 ... X3030 REM     Y4 ... Y3040 REM     3050 REM     N1 ... Dash length3060 REM     N2 ... Dash/(dash+space)3070 REM3080 REM     N9 ... Display address3090 REM     V0 ... Y to X viewport ratio3100 REM     W0 ... Y to X window ratio3110 REM3120 REM ... Initialization for starting with dash ...3130 N4=03140 GO TO 31703150 REM ... Initialization for starting with space ...3160 N4=N23170 MOVE @N9:X4,Y43180 X5=X43190 Y5=Y43200 X8=X43210 Y8=Y43220 N8=ABS(N1)/((N1>0)+(N1<0)*W0)/N23230 RETURN 3240 REM ... Branch point for drawing dashes and spaces ...3250 X6=03260 Y6=SQR(((Y4-Y8)*V0/W0)^2+(X4-X8)^2)3270 IF Y6=0 THEN 33003280 X6=(X4-X8)/Y63290 Y6=(Y4-Y8)/Y63300 N5=SQR(((Y4-Y5)*V0/W0)^2+(X4-X5)^2)3310 N6=(N2*(N4<N2)+(N4=>N2)-N4)*N83320 X5=X5+X6*(N5 MIN N6)3330 Y5=Y5+Y6*(N5 MIN N6)3340 IF N4=>N2 THEN 33903350 REM ... Dash ...3360 DRAW @N9:X5,Y53370 GO TO 34003380 REM ... Space ...3390 MOVE @N9:X5,Y53400 N4=N2*(N6<=N5)*(N4<N2)+(N4+N5/N8)*(N6>N5)3410 IF N6<=N5 THEN 33003420 N4=N4*(N4<1)3430 X8=X43440 Y8=Y43450 RETURN 